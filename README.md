# Сервис управления персоналом

[![Python](https://img.shields.io/badge/-Python-464646?style=flat-square&logo=Python)](https://www.python.org/)
[![Django](https://img.shields.io/badge/-Django-464646?style=flat-square&logo=Django)](https://www.djangoproject.com/)
[![SQLite](https://img.shields.io/badge/-SQLite-464646?style=flat-square&logo=SQLite)](https://sqlite.org/)
[![Docker](https://img.shields.io/badge/-Docker-464646?style=flat-square&logo=Docker)](https://www.docker.com/)
[![Ruff](https://img.shields.io/badge/-Ruff-464646?style=flat-square&logo=Ruff)](https://docs.astral.sh/ruff/)

# Описание 

Данный проект представляет собой веб-приложение для управления сотрудниками компании, разработанное с использованием Django и Django REST Framework. В качестве среды развертывания используется Docker, что позволяет создать изолированное окружение для запуска приложения. Для соблюдения качества кода применён линтер Ruff, который помогает поддерживать единый стиль написания кода и предотвращать появление ошибок.

В проекте реализована модель данных Employee, которая хранит информацию о каждом сотруднике. Каждый сотрудник имеет следующие атрибуты: ФИО, должность, дату приёма на работу, размер заработной платы, общую сумму выплаченной зарплаты, начальника и уровень в иерархии компании. Связь между сотрудниками реализована через поле manager, что позволяет выстраивать многоуровневую иерархию.

Для каждого нового сотрудника автоматически создаётся Django User, который связывается с моделью Employee через OneToOneField. При создании пользователя он добавляется в группу с названием, соответствующим должности сотрудника, если такая группа существует в системе. Это необходимо для разграничения прав доступа на уровне API.

В списке сотрудников отображаются следующие поля: ФИО, должность, ссылка на начальника с переходом к его карточке в админке, размер заработной платы и общая сумма выплат сотруднику. Также в админке реализованы фильтры по должности и уровню сотрудников, что облегчает поиск и фильтрацию данных. Кроме того, добавлено кастомное административное действие, позволяющее обнулять значение поля общей выплаченной зарплаты для выбранных сотрудников.

С помощью Django REST Framework реализовано API для получения информации о сотрудниках. Созданы два основных API эндпоинта: первый возвращает список всех сотрудников, второй позволяет получить сотрудников определённого уровня иерархии. Для сериализации данных используется DRF сериализатор, который преобразует объекты Employee в формат JSON для передачи по API.

Доступ к API ограничен с помощью кастомного класса разрешений CanAccessEmployeeAPI. Только пользователи, входящие в группы CTO, Admin или Manager, могут получать доступ к этим API эндпоинтам. Аутентификация в API реализована через Token Authentication, что соответствует современным требованиям безопасности.

Проект включает в себя как функциональную административную панель, так и защищённый API для работы с данными сотрудников. Приложение развернуто с использованием Docker и снабжено инструментами для обеспечения качества кода, такими как линтер Ruff.

# Локальный запуск проекта 

- Склонировать репозиторий:

```bash
   git clone <ссылка на репозиторий>
```

- Установить зависимости из файла requirements.txt:

```bash
   pip install -r requirements.txt
```

- Создать миграции:
```bash
   python manage.py makemigrations
```

- Выполнить миграции:
```bash
   python manage.py migrate
```

- Запустить проект:
```bash
   python manage.py runserver
```

# Запуск проекта через Docker

- Собрать образ из Dockerfile:
```bash
   docker build -t employee_management .
```

- Запустить контейнер:
```bash
   docker run -p 8000:8000 employee_management
```

#### Автор

Куприянов Т.А. - [https://github.com/tims1de](https://github.com/tims1de)
